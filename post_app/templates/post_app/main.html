{% extends 'base.html' %}
{% load static %}
{% block links %}
    <link rel="stylesheet" href="{% static 'css/modal.css' %}">
    <link rel="stylesheet" href="{% static 'post_app/css/main.css' %}">
    <link rel="stylesheet" href="{% static 'post_app/css/post.css' %}">
    <link rel="stylesheet" href="{% static 'post_app/css/user_bio.css' %}">
    <link rel="stylesheet" href="{% static 'post_app/css/first_entry.css' %}">
    <link rel="stylesheet" href="{% static 'post_app/css/create_post.css' %}">
{% endblock %}
{% block content %}
    <div class="main-layout">
        <div class="side-block">
            {% include 'post_app/user_bio.html' %}
            <div class="info-block standart-border">
                <div class="info-block-header">
                    <div class="header-name">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.5795 7.4981C2.57941 6.77294 2.75958 6.05913 3.10379 5.42087C3.448 4.78261 3.94547 4.23992 4.55144 3.84162C5.15742 3.44331 5.8529 3.20187 6.57533 3.13902C7.29776 3.07617 8.02448 3.19388 8.69014 3.48157C9.35579 3.76925 9.9395 4.21788 10.3888 4.78711C10.838 5.35634 11.1387 6.02831 11.2639 6.74259C11.389 7.45688 11.3346 8.19106 11.1056 8.87911C10.8766 9.56717 10.4802 10.1875 9.952 10.6843C10.9479 11.1678 11.8126 11.8843 12.4727 12.7729C13.1329 13.6616 13.5692 14.6963 13.7445 15.7893C13.7638 15.911 13.7589 16.0352 13.7302 16.155C13.7015 16.2747 13.6494 16.3877 13.5771 16.4873C13.5047 16.587 13.4134 16.6714 13.3084 16.7358C13.2034 16.8001 13.0868 16.8432 12.9651 16.8625C12.8435 16.8818 12.7192 16.8769 12.5995 16.8482C12.4797 16.8194 12.3668 16.7674 12.2672 16.695C12.1675 16.6227 12.0831 16.5314 12.0187 16.4264C11.9543 16.3214 11.9113 16.2047 11.892 16.0831C11.7045 14.9085 11.1044 13.8392 10.1995 13.0672C9.29451 12.2953 8.14399 11.8712 6.9545 11.8712C5.76502 11.8712 4.6145 12.2953 3.70954 13.0672C2.80459 13.8392 2.20449 14.9085 2.017 16.0831C1.99763 16.2047 1.95449 16.3214 1.89005 16.4263C1.82561 16.5313 1.74112 16.6225 1.64141 16.6949C1.54171 16.7672 1.42873 16.8191 1.30894 16.8478C1.18915 16.8764 1.06489 16.8812 0.943253 16.8618C0.821616 16.8425 0.704985 16.7993 0.60002 16.7349C0.495055 16.6705 0.403811 16.586 0.331497 16.4863C0.259183 16.3865 0.207216 16.2736 0.178564 16.1538C0.149911 16.034 0.145133 15.9097 0.164503 15.7881C0.339218 14.6951 0.775245 13.6605 1.43552 12.7721C2.0958 11.8838 2.9608 11.168 3.957 10.6856C3.522 10.2764 3.17538 9.78255 2.93848 9.23436C2.70157 8.68617 2.57941 8.09529 2.5795 7.4981ZM13.8295 5.6231C14.5558 5.62361 15.2663 5.83493 15.8748 6.23141C16.4833 6.62789 16.9636 7.19249 17.2574 7.85666C17.5512 8.52083 17.646 9.25602 17.5301 9.97297C17.4142 10.6899 17.0926 11.3578 16.6045 11.8956C17.3658 12.2727 18.0422 12.8011 18.5924 13.4484C19.1426 14.0958 19.555 14.8485 19.8045 15.6606C19.8541 15.8182 19.861 15.9861 19.8247 16.1472C19.7884 16.3084 19.7101 16.4571 19.5977 16.5782C19.4854 16.6993 19.343 16.7885 19.185 16.8368C19.0271 16.8851 18.8591 16.8907 18.6983 16.8531C18.5374 16.8159 18.3893 16.7369 18.2688 16.6241C18.1483 16.5113 18.0597 16.3686 18.012 16.2106C17.7876 15.486 17.3793 14.832 16.8268 14.3124C16.2742 13.7927 15.5964 13.4252 14.8595 13.2456C14.6548 13.1962 14.4727 13.0793 14.3425 12.9138C14.2124 12.7482 14.1417 12.5437 14.142 12.3331V11.8931C14.1419 11.7186 14.1905 11.5475 14.2824 11.399C14.3742 11.2506 14.5057 11.1308 14.662 11.0531C15.041 10.8653 15.3453 10.5549 15.5256 10.1723C15.7058 9.78969 15.7514 9.35738 15.655 8.94558C15.5586 8.53378 15.3258 8.16668 14.9944 7.90391C14.663 7.64113 14.2524 7.49812 13.8295 7.4981C13.5809 7.4981 13.3424 7.39933 13.1666 7.22351C12.9908 7.0477 12.892 6.80924 12.892 6.5606C12.892 6.31196 12.9908 6.0735 13.1666 5.89769C13.3424 5.72187 13.5809 5.6231 13.8295 5.6231ZM6.9545 4.9981C6.62158 4.99057 6.29051 5.04963 5.98072 5.17181C5.67094 5.29399 5.38869 5.47684 5.15054 5.7096C4.91239 5.94237 4.72314 6.22037 4.59391 6.52728C4.46468 6.83419 4.39807 7.16383 4.39798 7.49683C4.3979 7.82984 4.46435 8.15951 4.59343 8.46649C4.7225 8.77346 4.91161 9.05156 5.14964 9.28444C5.38767 9.51733 5.66984 9.70031 5.97956 9.82265C6.28928 9.94498 6.62033 10.0042 6.95325 9.99685C7.60645 9.9824 8.22805 9.71282 8.68497 9.2458C9.14188 8.77878 9.39782 8.15145 9.39798 7.49808C9.39815 6.84472 9.14252 6.21726 8.68584 5.75001C8.22915 5.28277 7.6077 5.01287 6.9545 4.9981Z" fill="#81818D"/>
                        </svg>
                        <span>Запити</span>
                    </div>
                    <span>Дивитись всі</span>
                </div>
                {% if not user.profile.received_requests.exists %}
                    <h3 class="empty-msg">Вам поки що ніхто не надсилав запитів на дружбу.</h3>
                {% else %}
                    <div class="info-block-content">
                        {% for friend_request in user.profile.received_requests.all|slice:3 %}
                            <div class="info-block-content-element">
                                {% if friend_request.from_profile.photo %}
                                    <img src="{{ friend_request.from_profile.photo.url }}" alt="Profile photo" class="avatar">
                                {% else %}
                                    <img src="{% static 'profile_app/img/default_photo.png' %}" alt="Default profile photo" class="avatar">
                                {% endif %}
                                <div class="data">
                                    <p>{{ friend_request.from_profile.user.first_name }} {{ friend_request.from_profile.user.last_name }}</p>
                                    <p>0 підписників</p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="info-block standart-border">
                <div class="info-block-header">
                    <div class="header-name">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.48486 10C2.48486 8.00689 3.27664 6.09538 4.68601 4.68601C6.09538 3.27664 8.00689 2.48486 10 2.48486C11.9932 2.48486 13.9047 3.27664 15.3141 4.68601C16.7234 6.09538 17.5152 8.00689 17.5152 10V14.7816C17.5152 15.5782 17.5152 15.9746 17.3969 16.2931C17.3027 16.5454 17.1555 16.7746 16.965 16.965C16.7746 17.1555 16.5454 17.3027 16.2931 17.3969C15.9746 17.5152 15.5772 17.5152 14.7816 17.5152H10C8.00689 17.5152 6.09538 16.7234 4.68601 15.3141C3.27664 13.9047 2.48486 11.9932 2.48486 10Z" stroke="#81818D" stroke-width="1.66667"/>
                            <path d="M7.18164 9.06055H12.818M9.99983 12.8181H12.818" stroke="#81818D" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Повідомлення</span>
                    </div>
                    <span>Дивитись всі</span>
                </div>
            </div>
        </div>
        <div class="content-container">
            <div id="textarea-container">
                <textarea name="" id="" placeholder="Текст публікації" id="btn-textarea"></textarea>
                <button class="send-btn" id="open-form">Перейти до оформлення</button>
            </div>
            <div class="posts" id="posts-container">
                {% include 'post_app/posts.html' %}
            </div>
            <div id="post-loader"></div>
        </div>
    </div>
    {% include 'post_app/create_post.html' %}
    {% if first_entry %}
        {% include 'post_app/first_entry.html' %}
    {% endif %}
{% endblock %}
{% block scripts %}
    <script src="{% static 'js/modal.js' %}"></script>
    <script src="{% static 'post_app/js/loadPost.js' %}"></script>
    <script src="{% static 'post_app/js/photoGrid.js' %}"></script>
    <script src="{% static 'post_app/js/cleanForm.js' %}"></script>
    <script src="{% static 'post_app/js/createPost.js' %}"></script>
    <script src="{% static 'post_app/js/debounce.js' %}"></script>
    <script src="{% static 'post_app/js/usernameValidation.js' %}"></script>
    <script src="{% static 'post_app/js/firstEntry.js' %}"></script>
{% endblock %}