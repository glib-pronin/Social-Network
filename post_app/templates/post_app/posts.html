{% load static %}
{% for post in post_content.page %}
    <div class="post standart-border" data-post-id="{{ post.id }}">
        {% if request.resolver_match.url_name == 'main' %}
            <div class="menu-container hidden">
                <button class="close-menu">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.1875 10C12.1875 10.4326 12.0592 10.8556 11.8188 11.2153C11.5785 11.575 11.2368 11.8554 10.8371 12.021C10.4374 12.1866 9.99757 12.2299 9.57324 12.1455C9.14891 12.0611 8.75913 11.8527 8.45321 11.5468C8.14728 11.2409 7.93894 10.8511 7.85453 10.4268C7.77013 10.0024 7.81345 9.56259 7.97901 9.16288C8.14458 8.76317 8.42496 8.42153 8.78469 8.18116C9.14442 7.9408 9.56735 7.8125 10 7.8125C10.5802 7.8125 11.1366 8.04297 11.5468 8.45321C11.957 8.86344 12.1875 9.41984 12.1875 10ZM10 5.9375C10.4326 5.9375 10.8556 5.80921 11.2153 5.56884C11.575 5.32848 11.8554 4.98683 12.021 4.58712C12.1866 4.18741 12.2299 3.74757 12.1455 3.32324C12.0611 2.89891 11.8527 2.50913 11.5468 2.2032C11.2409 1.89728 10.8511 1.68894 10.4268 1.60453C10.0024 1.52013 9.56259 1.56345 9.16288 1.72901C8.76317 1.89458 8.42153 2.17496 8.18116 2.53469C7.9408 2.89442 7.8125 3.31735 7.8125 3.75C7.8125 4.33016 8.04297 4.88656 8.45321 5.2968C8.86344 5.70703 9.41984 5.9375 10 5.9375ZM10 14.0625C9.56735 14.0625 9.14442 14.1908 8.78469 14.4312C8.42496 14.6715 8.14458 15.0132 7.97901 15.4129C7.81345 15.8126 7.77013 16.2524 7.85453 16.6768C7.93894 17.1011 8.14728 17.4909 8.45321 17.7968C8.75913 18.1027 9.14891 18.3111 9.57324 18.3955C9.99757 18.4799 10.4374 18.4366 10.8371 18.271C11.2368 18.1054 11.5785 17.825 11.8188 17.4653C12.0592 17.1056 12.1875 16.6826 12.1875 16.25C12.1875 15.6698 11.957 15.1134 11.5468 14.7032C11.1366 14.293 10.5802 14.0625 10 14.0625Z" fill="#81818D"/>
                    </svg>
                </button>
                <div class="horizontal-line"></div>
                <span class="clickable hide-post">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <path d="M8.23268 8.23317C7.98706 8.46204 7.79005 8.73805 7.65341 9.04471C7.51677 9.35137 7.4433 9.68242 7.43738 10.0181C7.43145 10.3538 7.4932 10.6872 7.61894 10.9985C7.74468 11.3098 7.93182 11.5926 8.16922 11.83C8.40662 12.0674 8.6894 12.2545 9.00069 12.3802C9.31198 12.506 9.64541 12.5677 9.98109 12.5618C10.3168 12.5559 10.6478 12.4824 10.9545 12.3458C11.2611 12.2091 11.5371 12.0121 11.766 11.7665M8.94102 4.23317C9.29211 4.18943 9.64554 4.16716 9.99935 4.1665C15.8327 4.1665 18.3327 9.99984 18.3327 9.99984C17.9601 10.7974 17.4929 11.5473 16.941 12.2332M5.50768 5.50817C3.85039 6.63702 2.52424 8.18755 1.66602 9.99984C1.66602 9.99984 4.16602 15.8332 9.99935 15.8332C11.5959 15.8375 13.1583 15.3708 14.491 14.4915M1.66602 1.6665L18.3327 18.3332" stroke="#543C52" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
                    </svg>
                    Приховати пост
                </span>
            </div>
        {% endif %}
        <a href="{% url 'profile_page' post.author.profile.id %}">
            <div class="author-line">
                <div class="author-info">
                    <div class="user-wrapper">
                        {% if post.author.profile.photo.image %}
                            <img src="{{ post.author.profile.photo.image_webp.url }}" alt="" class="avatar">
                        {% else %}
                            <img src="{% static 'profile_app/img/default_photo.png' %}" alt="Default profile photo" class="avatar">
                        {% endif %}
                        {% if post.author.profile.is_text_signature and post.author.profile.pseudonym %}
                            <span>{{ post.author.profile.pseudonym }}</span>
                        {% endif %}
                    </div>
                    {% if post.author.profile.is_image_signature and post.author.profile.signature %}
                        <img src="{{ post.author.profile.signature.url }}" alt="" class="signature">
                    {% endif %}
                </div>
                <svg class="open-menu" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.1875 10C12.1875 10.4326 12.0592 10.8556 11.8188 11.2153C11.5785 11.575 11.2368 11.8554 10.8371 12.021C10.4374 12.1866 9.99757 12.2299 9.57324 12.1455C9.14891 12.0611 8.75913 11.8527 8.45321 11.5468C8.14728 11.2409 7.93894 10.8511 7.85453 10.4268C7.77013 10.0024 7.81345 9.56259 7.97901 9.16288C8.14458 8.76317 8.42496 8.42153 8.78469 8.18116C9.14442 7.9408 9.56735 7.8125 10 7.8125C10.5802 7.8125 11.1366 8.04297 11.5468 8.45321C11.957 8.86344 12.1875 9.41984 12.1875 10ZM10 5.9375C10.4326 5.9375 10.8556 5.80921 11.2153 5.56884C11.575 5.32848 11.8554 4.98683 12.021 4.58712C12.1866 4.18741 12.2299 3.74757 12.1455 3.32324C12.0611 2.89891 11.8527 2.50913 11.5468 2.2032C11.2409 1.89728 10.8511 1.68894 10.4268 1.60453C10.0024 1.52013 9.56259 1.56345 9.16288 1.72901C8.76317 1.89458 8.42153 2.17496 8.18116 2.53469C7.9408 2.89442 7.8125 3.31735 7.8125 3.75C7.8125 4.33016 8.04297 4.88656 8.45321 5.2968C8.86344 5.70703 9.41984 5.9375 10 5.9375ZM10 14.0625C9.56735 14.0625 9.14442 14.1908 8.78469 14.4312C8.42496 14.6715 8.14458 15.0132 7.97901 15.4129C7.81345 15.8126 7.77013 16.2524 7.85453 16.6768C7.93894 17.1011 8.14728 17.4909 8.45321 17.7968C8.75913 18.1027 9.14891 18.3111 9.57324 18.3955C9.99757 18.4799 10.4374 18.4366 10.8371 18.271C11.2368 18.1054 11.5785 17.825 11.8188 17.4653C12.0592 17.1056 12.1875 16.6826 12.1875 16.25C12.1875 15.6698 11.957 15.1134 11.5468 14.7032C11.1366 14.293 10.5802 14.0625 10 14.0625Z" fill="#81818D"/>
                </svg>
            </div>
        </a>
        <div class="post-body">
            <div>
                {% if post.title %}
                    <h2 class="post-title">{{ post.title }}</h2>
                {% endif %}
                {% if post.subject %}
                    <p>{{ post.subject }}</p>
                {% endif %}
            </div>
            <div>
                {% if post.content %}
                    <p>{{ post.content }} Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quo vel quia similique laborum ab fugit rerum. Amet id, quidem labore excepturi adipisci nobis obcaecati? Cum error quod saepe voluptas dolores?100</p>
                {% endif %}
                <p class="post-tags">
                    {% for tag in post.tags.all %}
                        <span>#{{ tag.name }}</span>
                    {% endfor %}
                </p>
            </div>
            {% if post.links %}
                <div class="post-links">
                    {% for link in post.get_links %}
                        <a href="{{ link }}" target="_blank">{{ link }}</a>
                    {% endfor %}
                </div>
            {% endif %}
            {% if post.images.count > 0 %}
                <div class="post-images post-gallery">
                    {% for img_row in post.get_images %}
                        <div class="post-image-row {% if forloop.counter|divisibleby:2 %}row-2{% else %}row-3{% endif %}">
                            {% for img in img_row %}
                            <a href="{{ img.image.url }}" data-pswp-width="{{ img.width }}" data-pswp-height="{{ img.height }}" >
                                <div class="post-image-item">
                                    <img src="{{ img.image_webp.url }}" alt="">
                                </div>
                            </a>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            <div class="post-info">
                <div class="hearts info">
                    <svg class="cursor-pointer heart {% if post.my_heart %} selected {% endif %}" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.0837 15.4583L10.0003 15.5417L9.90866 15.4583C5.95033 11.8667 3.33366 9.49167 3.33366 7.08333C3.33366 5.41667 4.58366 4.16667 6.25033 4.16667C7.53366 4.16667 8.78366 5 9.22533 6.13333H10.7753C11.217 5 12.467 4.16667 13.7503 4.16667C15.417 4.16667 16.667 5.41667 16.667 7.08333C16.667 9.49167 14.0503 11.8667 10.0837 15.4583ZM13.7503 2.5C12.3003 2.5 10.9087 3.175 10.0003 4.23333C9.09199 3.175 7.70033 2.5 6.25033 2.5C3.68366 2.5 1.66699 4.50833 1.66699 7.08333C1.66699 10.225 4.50033 12.8 8.79199 16.6917L10.0003 17.7917L11.2087 16.6917C15.5003 12.8 18.3337 10.225 18.3337 7.08333C18.3337 4.50833 16.317 2.5 13.7503 2.5Z" fill="#81818D"/>
                    </svg>
                    <span>
                        <span class="count">{{ post.hearts_count }}</span>
                        Вподобань
                    </span>
                </div>
                <div class="likes info">
                    <svg class="cursor-pointer like {% if post.my_like %} selected {% endif %}" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18.5156 6.98984C18.3103 6.75722 18.0578 6.57094 17.7749 6.44338C17.4921 6.31583 17.1853 6.24991 16.875 6.25H12.8125V5.3125C12.8115 4.40114 12.449 3.52739 11.8045 2.88296C11.1601 2.23853 10.2864 1.87603 9.375 1.875C9.20097 1.87502 9.03037 1.92348 8.88232 2.01496C8.73427 2.10645 8.6146 2.23733 8.53672 2.39297L5.67031 8.125H2.5C2.0856 8.125 1.68817 8.28962 1.39515 8.58265C1.10212 8.87567 0.9375 9.2731 0.9375 9.6875V16.5625C0.9375 16.9769 1.10212 17.3743 1.39515 17.6674C1.68817 17.9604 2.0856 18.125 2.5 18.125H15.9375C16.4707 18.1249 16.9854 17.9301 17.3851 17.5772C17.7847 17.2243 18.0417 16.7376 18.1078 16.2086L19.0453 8.70859C19.0839 8.40093 19.0566 8.08858 18.9653 7.79226C18.874 7.49594 18.7207 7.22243 18.5156 6.98984ZM2.8125 10H5.3125V16.25H2.8125V10ZM17.1875 8.47656L16.25 15.9766C16.2404 16.0525 16.2033 16.1223 16.1457 16.1727C16.0881 16.2231 16.014 16.2506 15.9375 16.25H7.1875V9.28359L9.90781 3.84375C10.2095 3.95319 10.4702 4.15287 10.6544 4.41565C10.8386 4.67843 10.9375 4.99157 10.9375 5.3125V7.1875C10.9375 7.43614 11.0363 7.6746 11.2121 7.85041C11.3879 8.02623 11.6264 8.125 11.875 8.125H16.875C16.9195 8.12465 16.9636 8.13383 17.0044 8.15192C17.0451 8.17 17.0814 8.19659 17.111 8.22988C17.1406 8.26317 17.1627 8.3024 17.1759 8.34495C17.1891 8.3875 17.1931 8.43237 17.1875 8.47656Z" fill="#81818D"/>
                    </svg>
                    <span>
                        <span class="count">{{ post.likes_count }}</span>
                        Вподобань
                    </span>
                </div>
                <div class="views info">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.66699 9.99984C1.66699 9.99984 4.16699 4.1665 10.0003 4.1665C15.8337 4.1665 18.3337 9.99984 18.3337 9.99984C18.3337 9.99984 15.8337 15.8332 10.0003 15.8332C4.16699 15.8332 1.66699 9.99984 1.66699 9.99984Z" stroke="#81818D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10.0003 12.4998C11.381 12.4998 12.5003 11.3805 12.5003 9.99984C12.5003 8.61913 11.381 7.49984 10.0003 7.49984C8.61961 7.49984 7.50033 8.61913 7.50033 9.99984C7.50033 11.3805 8.61961 12.4998 10.0003 12.4998Z" stroke="#81818D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>
                        <span class="count">890</span>
                        Переглядів
                    </span>
                </div>
            </div>
        </div>
    </div>
{% endfor %}